/* FreeMe â€“ Warm Depth Design System */
:root{
  --bg-0:#09100f;--bg-1:#0f1a18;--bg-2:#162421;--bg-3:#1e302c;
  --bg-glass:rgba(22,36,33,0.88);
  --gold:#e8a832;--gold-d:rgba(232,168,50,0.15);--gold-t:#f5c96a;
  --green:#4ecb8a;--green-d:rgba(78,203,138,0.13);
  --red:#e05454;--red-d:rgba(224,84,84,0.15);
  --blue:#5b9be8;--blue-d:rgba(91,155,232,0.13);
  --purple:#a78bfa;--purple-d:rgba(167,139,250,0.13);
  --t1:#e2ddd4;--t2:#9fa8a0;--t3:#5e6b65;
  --bdr:rgba(255,255,255,0.06);--bdr-s:rgba(255,255,255,0.04);
  --sh-gold:0 4px 20px rgba(232,168,50,0.22);
  --r1:8px;--r2:14px;--r3:20px;--r4:28px;--rf:100px;
  --nav-h:70px;
  --fd:'Playfair Display',serif;
  --fb:'DM Sans',system-ui,sans-serif;
  --t:0.22s cubic-bezier(0.4,0,0.2,1);
  --sp:0.38s cubic-bezier(0.34,1.56,0.64,1);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{font-size:16px}
body{background:var(--bg-0);color:var(--t1);font-family:var(--fb);font-weight:400;line-height:1.6;direction:rtl;-webkit-font-smoothing:antialiased;overflow:hidden;height:100dvh}
button{cursor:pointer;font-family:inherit;border:none;background:none}
input,textarea,select{font-family:inherit;direction:rtl}
h1,h2,h3,h4{font-family:var(--fd);font-weight:600;line-height:1.3}
a{color:var(--gold);text-decoration:none}
img{max-width:100%}

/* Shell */
#app{position:relative;height:100dvh;overflow:hidden;display:flex;flex-direction:column}
#main-content{flex:1;overflow-y:auto;overflow-x:hidden;padding-bottom:calc(var(--nav-h) + env(safe-area-inset-bottom));-webkit-overflow-scrolling:touch}
#main-content::-webkit-scrollbar{display:none}

/* Loading */
#loading-screen{position:fixed;inset:0;background:var(--bg-0);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px;z-index:9999;transition:opacity .5s,visibility .5s}
#loading-screen.hidden{opacity:0;visibility:hidden;pointer-events:none}
.loading-logo{font-family:var(--fd);font-size:2.6rem;font-weight:700;color:var(--gold);letter-spacing:-.02em}
.loading-sub{font-size:.82rem;color:var(--t3);letter-spacing:.1em;text-transform:uppercase}
.loading-dots{display:flex;gap:8px}
.loading-dots span{width:8px;height:8px;border-radius:50%;background:var(--gold);opacity:.3;animation:ldot 1.4s infinite}
.loading-dots span:nth-child(2){animation-delay:.2s}
.loading-dots span:nth-child(3){animation-delay:.4s}
@keyframes ldot{0%,80%,100%{opacity:.3;transform:scale(1)}40%{opacity:1;transform:scale(1.3)}}

/* Bottom Nav */
.bottom-nav{position:fixed;bottom:0;left:0;right:0;height:calc(var(--nav-h) + env(safe-area-inset-bottom));padding-bottom:env(safe-area-inset-bottom);background:var(--bg-glass);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-top:1px solid var(--bdr);display:flex;z-index:100}
.nav-item{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:3px;color:var(--t3);transition:color var(--t);-webkit-tap-highlight-color:transparent;position:relative}
.nav-item.active{color:var(--gold)}
.nav-item::before{content:'';position:absolute;top:0;width:20px;height:2px;background:var(--gold);border-radius:0 0 var(--rf) var(--rf);transform:scaleX(0);transition:transform var(--sp)}
.nav-item.active::before{transform:scaleX(1)}
.nav-icon{font-size:1.3rem;line-height:1;transition:transform var(--sp)}
.nav-item.active .nav-icon{transform:translateY(-2px)}
.nav-label{font-size:.6rem;font-weight:500;letter-spacing:.03em}

/* SOS FAB */
.sos-fab{position:fixed;bottom:calc(var(--nav-h) + env(safe-area-inset-bottom) + 14px);left:50%;transform:translateX(-50%);width:52px;height:52px;border-radius:50%;background:var(--red);color:#fff;font-weight:700;font-size:.7rem;letter-spacing:.05em;z-index:200;box-shadow:0 4px 20px rgba(224,84,84,.5);border:2px solid rgba(255,255,255,.2);transition:transform var(--sp),box-shadow var(--t);-webkit-tap-highlight-color:transparent}
.sos-fab:active{transform:translateX(-50%) scale(.9)}

/* SOS Overlay */
.sos-overlay{position:fixed;inset:0;background:var(--bg-0);z-index:500;display:flex;flex-direction:column;align-items:center;padding:56px 24px 40px;overflow-y:auto;transition:opacity .3s,visibility .3s}
.sos-overlay.hidden{opacity:0;visibility:hidden;pointer-events:none}
.sos-pulse{width:76px;height:76px;border-radius:50%;background:var(--red-d);border:2px solid var(--red);display:flex;align-items:center;justify-content:center;font-size:1.9rem;margin-bottom:18px;animation:spulse 2s infinite}
@keyframes spulse{0%,100%{box-shadow:0 0 0 0 rgba(224,84,84,.4)}50%{box-shadow:0 0 0 18px rgba(224,84,84,0)}}
.sos-title{font-size:1.5rem;text-align:center;margin-bottom:6px}
.sos-sub{color:var(--t2);text-align:center;margin-bottom:28px;font-size:.9rem}
.sos-options{display:flex;flex-direction:column;gap:12px;width:100%;max-width:380px}
.sos-option{background:var(--bg-2);border:1px solid var(--bdr);border-radius:var(--r3);padding:18px;display:flex;align-items:center;gap:14px;color:var(--t1);transition:all var(--t);text-align:right}
.sos-option:active{background:var(--bg-3);transform:scale(.98)}
.sos-opt-icon{font-size:1.9rem;flex-shrink:0}
.sos-opt-title{font-weight:600;margin-bottom:2px;font-size:.93rem}
.sos-opt-desc{font-size:.75rem;color:var(--t2)}
.sos-close-btn{margin-top:20px;color:var(--t3);font-size:.87rem;padding:12px 24px}

/* Breathing */
.breathing-screen{position:fixed;inset:0;background:var(--bg-0);z-index:600;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px}
.breath-ring-wrap{position:relative;display:flex;align-items:center;justify-content:center;margin-bottom:36px}
.breath-ring{width:220px;height:220px;border-radius:50%;background:var(--blue-d);position:absolute;animation:bring 8s ease-in-out infinite}
@keyframes bring{0%,100%{transform:scale(.82);opacity:.4}38%{transform:scale(1.48);opacity:0}62%{transform:scale(1.05);opacity:.25}}
.breath-circle{width:140px;height:140px;border-radius:50%;background:radial-gradient(circle,var(--blue) 0%,rgba(91,155,232,.3) 70%,transparent 100%);display:flex;align-items:center;justify-content:center;flex-direction:column;gap:4px;animation:bcirc 8s ease-in-out infinite;position:relative;z-index:1}
@keyframes bcirc{0%,100%{transform:scale(.82)}38%{transform:scale(1.28)}62%{transform:scale(1.28)}}
.breath-count{font-size:2.2rem;font-family:var(--fd);color:#fff}
.breath-phase-text{font-size:.65rem;color:rgba(255,255,255,.7);font-weight:600;letter-spacing:.08em;text-transform:uppercase}
.breath-label{font-size:1.15rem;color:var(--t1);text-align:center;margin-bottom:6px}
.breath-instruction{font-size:.95rem;color:var(--blue);text-align:center;margin-bottom:28px;font-weight:500;min-height:1.4rem;transition:opacity .5s}
.breath-stop{color:var(--t3);font-size:.87rem;padding:12px 24px;background:var(--bg-2);border-radius:var(--rf)}

/* Modal */
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.72);z-index:300;display:flex;align-items:flex-end;opacity:0;visibility:hidden;transition:all var(--t)}
.modal-backdrop.open{opacity:1;visibility:visible}
.modal{width:100%;background:var(--bg-2);border-radius:var(--r4) var(--r4) 0 0;padding:8px 0 env(safe-area-inset-bottom);max-height:92dvh;overflow-y:auto;transform:translateY(100%);transition:transform var(--sp)}
.modal-backdrop.open .modal{transform:translateY(0)}
.modal-handle{width:38px;height:4px;background:var(--bdr);border-radius:var(--rf);margin:10px auto 0}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;border-bottom:1px solid var(--bdr)}
.modal-title{font-size:1.05rem;font-weight:600}
.modal-close-btn{color:var(--t2);font-size:1.1rem;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:var(--bg-3)}
.modal-body{padding:20px}

/* Pages */
.page{min-height:calc(100dvh - var(--nav-h));animation:fsin .28s ease}
@keyframes fsin{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

/* Page Header */
.page-header{padding:14px 20px 10px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;background:var(--bg-glass);backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border-bottom:1px solid var(--bdr-s);z-index:50}
.page-title{font-size:1.05rem;font-weight:600}
.header-icon-btn{width:34px;height:34px;border-radius:50%;background:var(--bg-3);display:flex;align-items:center;justify-content:center;font-size:.95rem;color:var(--t2)}

/* Dashboard */
.dash-hero{padding:26px 20px 16px}
.dash-greeting{font-size:.8rem;color:var(--t2);margin-bottom:4px;letter-spacing:.03em}
.dash-name{font-family:var(--fd);font-size:2.1rem;color:var(--t1);line-height:1.1}
.dash-name em{font-style:normal;color:var(--gold-t)}
.dash-date{font-size:.76rem;color:var(--t3);margin-top:5px}
.dash-since{font-size:.76rem;color:var(--t3);margin-top:3px}
.since-val{color:var(--green);font-weight:600}

/* Mood Checkin */
.mood-checkin{margin:0 16px 14px;background:var(--bg-2);border-radius:var(--r3);padding:16px;border:1px solid var(--bdr)}
.section-label{font-size:.7rem;text-transform:uppercase;letter-spacing:.08em;color:var(--t3);margin-bottom:12px;font-weight:600}
.mood-btns{display:flex;gap:7px}
.mood-btn{flex:1;aspect-ratio:1;border-radius:var(--r2);background:var(--bg-3);border:1.5px solid transparent;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:3px;transition:all var(--t);font-size:1.25rem}
.mood-btn .mood-word{font-size:.44rem;color:var(--t3);font-weight:500;letter-spacing:.02em}
.mood-btn.sel{border-color:var(--gold);background:var(--gold-d)}
.mood-btn:active{transform:scale(.93)}

/* AI Insight Card */
.insight-card{margin:0 16px 14px;background:linear-gradient(135deg,var(--bg-2) 0%,rgba(30,48,44,.92) 100%);border-radius:var(--r3);padding:18px;border:1px solid rgba(232,168,50,.18);position:relative;overflow:hidden}
.insight-card::before{content:'';position:absolute;top:-28px;right:-28px;width:90px;height:90px;border-radius:50%;background:var(--gold-d);filter:blur(20px)}
.insight-hdr{display:flex;align-items:center;gap:8px;margin-bottom:10px}
.insight-icon{font-size:1rem}
.insight-lbl{font-size:.7rem;color:var(--gold-t);font-weight:600;letter-spacing:.06em;text-transform:uppercase}
.insight-txt{font-size:.88rem;color:var(--t1);line-height:1.75;position:relative;z-index:1}
.insight-txt.loading{color:var(--t3);font-style:italic}
.insight-refresh{font-size:.7rem;color:var(--t3);margin-top:10px;display:block}

/* Quick Stats */
.quick-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:0 16px 14px}
.stat-card{background:var(--bg-2);border-radius:var(--r2);padding:14px 10px;text-align:center;border:1px solid var(--bdr)}
.stat-val{font-family:var(--fd);font-size:1.5rem;color:var(--gold-t);line-height:1;margin-bottom:4px}
.stat-lbl{font-size:.58rem;color:var(--t3);font-weight:500;letter-spacing:.02em;line-height:1.4}

/* Section headers */
.section-hdr{display:flex;align-items:center;justify-content:space-between;padding:0 20px;margin-bottom:10px}
.section-hdr-txt{font-size:.7rem;text-transform:uppercase;letter-spacing:.08em;color:var(--t3);font-weight:600}
.section-hdr-link{font-size:.72rem;color:var(--gold)}

/* Entry Cards */
.entry-list{padding:0 16px;display:flex;flex-direction:column;gap:9px}
.entry-card{background:var(--bg-2);border-radius:var(--r3);border:1px solid var(--bdr);padding:14px;display:flex;gap:12px;align-items:flex-start;transition:all var(--t)}
.entry-card:active{background:var(--bg-3)}
.entry-bar{width:3px;border-radius:2px;align-self:stretch;flex-shrink:0;min-height:36px}
.entry-bar.checkin{background:var(--blue)}
.entry-bar.relapse{background:var(--red)}
.entry-bar.win{background:var(--green)}
.entry-content{flex:1;min-width:0}
.entry-hdr{display:flex;align-items:center;justify-content:space-between;margin-bottom:3px}
.entry-type{font-size:.66rem;font-weight:700;letter-spacing:.05em;text-transform:uppercase}
.entry-type.checkin{color:var(--blue)}
.entry-type.relapse{color:var(--red)}
.entry-type.win{color:var(--green)}
.entry-date{font-size:.66rem;color:var(--t3)}
.entry-desc{font-size:.83rem;color:var(--t1);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:5px}
.entry-mood{display:flex;gap:2px;align-items:center}
.mood-pip{width:5px;height:5px;border-radius:50%;background:var(--bg-3)}
.mood-pip.on{background:var(--gold)}
.entry-tags{display:flex;flex-wrap:wrap;gap:3px;margin-top:5px}
.etag{font-size:.6rem;padding:1px 7px;background:var(--bg-3);border-radius:var(--rf);color:var(--t2)}

/* Journal FAB */
.jfab{position:fixed;bottom:calc(var(--nav-h) + env(safe-area-inset-bottom) + 80px);left:18px;height:50px;padding:0 18px;background:var(--gold);color:#09100f;border-radius:var(--rf);font-weight:700;font-size:.86rem;box-shadow:var(--sh-gold);display:flex;align-items:center;gap:7px;z-index:150;transition:all var(--t)}
.jfab:active{transform:scale(.95)}

/* Forms */
.form-group{margin-bottom:18px}
.form-label{display:block;font-size:.77rem;color:var(--t2);margin-bottom:7px;font-weight:500}
.form-input,.form-textarea,.form-select{width:100%;background:var(--bg-3);border:1.5px solid var(--bdr);border-radius:var(--r2);color:var(--t1);padding:11px 15px;font-size:.91rem;outline:none;transition:border-color var(--t);resize:none;appearance:none}
.form-input:focus,.form-textarea:focus,.form-select:focus{border-color:var(--gold)}
.form-textarea{min-height:85px;line-height:1.6}
.form-hint{font-size:.7rem;color:var(--t3);margin-top:4px}

/* Type Selector */
.type-sel{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.tsel-btn{padding:12px 6px;border-radius:var(--r2);background:var(--bg-3);border:1.5px solid transparent;color:var(--t2);font-size:.74rem;font-weight:500;text-align:center;display:flex;flex-direction:column;align-items:center;gap:5px;transition:all var(--t)}
.tsel-emoji{font-size:1.2rem}
.tsel-btn.sel.checkin{border-color:var(--blue);background:var(--blue-d);color:var(--blue)}
.tsel-btn.sel.relapse{border-color:var(--red);background:var(--red-d);color:var(--red)}
.tsel-btn.sel.win{border-color:var(--green);background:var(--green-d);color:var(--green)}

/* Mood Scale */
.mood-scale{display:flex;gap:7px}
.ms-btn{flex:1;aspect-ratio:1;border-radius:var(--r1);background:var(--bg-3);font-size:1.2rem;display:flex;align-items:center;justify-content:center;border:1.5px solid transparent;transition:all var(--t)}
.ms-btn.sel{border-color:var(--gold);background:var(--gold-d);transform:scale(1.08)}

/* Trigger Tags */
.trig-tags{display:flex;flex-wrap:wrap;gap:7px}
.ttag{padding:6px 13px;border-radius:var(--rf);background:var(--bg-3);border:1.5px solid transparent;color:var(--t2);font-size:.77rem;transition:all var(--t)}
.ttag.sel{background:var(--gold-d);border-color:var(--gold);color:var(--gold-t)}

/* Duration */
.dur-opts{display:grid;grid-template-columns:repeat(4,1fr);gap:6px}
.dur-btn{padding:8px 4px;border-radius:var(--r1);background:var(--bg-3);border:1.5px solid transparent;color:var(--t2);font-size:.7rem;font-weight:500;text-align:center;transition:all var(--t)}
.dur-btn.sel{border-color:var(--red);background:var(--red-d);color:var(--red)}

/* Relapse extra */
.relapse-extra{display:none}
.relapse-extra.vis{display:block}

/* Buttons */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:13px 22px;border-radius:var(--rf);font-size:.87rem;font-weight:600;transition:all var(--t)}
.btn:active{transform:scale(.97)}
.btn-pri{background:var(--gold);color:#09100f;box-shadow:var(--sh-gold)}
.btn-sec{background:var(--bg-3);color:var(--t1);border:1px solid var(--bdr)}
.btn-dng{background:var(--red-d);color:var(--red);border:1px solid rgba(224,84,84,.3)}
.btn-ghost{color:var(--t2)}
.btn-full{width:100%}

/* Insights */
.chart-card{margin:0 16px 14px;background:var(--bg-2);border-radius:var(--r3);padding:18px;border:1px solid var(--bdr)}
.chart-title{font-size:.7rem;text-transform:uppercase;letter-spacing:.08em;color:var(--t3);font-weight:600;margin-bottom:14px}
.bar-row{display:flex;align-items:center;gap:9px;margin-bottom:9px}
.bar-lbl{font-size:.7rem;color:var(--t2);width:65px;text-align:right;flex-shrink:0}
.bar-track{flex:1;height:7px;background:var(--bg-3);border-radius:var(--rf);overflow:hidden}
.bar-fill{height:100%;border-radius:var(--rf);background:var(--gold);transition:width 1s cubic-bezier(.4,0,.2,1);width:0}
.bar-count{font-size:.7rem;color:var(--t3);width:18px;text-align:left;flex-shrink:0}
.ins-summary{display:grid;grid-template-columns:1fr 1fr;gap:9px;margin:0 16px 14px}
.isc{background:var(--bg-2);border-radius:var(--r3);padding:16px;border:1px solid var(--bdr)}
.isc-val{font-family:var(--fd);font-size:1.7rem;line-height:1;margin-bottom:3px;color:var(--gold-t)}
.isc-lbl{font-size:.63rem;color:var(--t3);font-weight:500;letter-spacing:.03em;line-height:1.3}
.isc-sub{font-size:.68rem;color:var(--t3);margin-top:5px}

/* Mood SVG Chart */
.mood-chart-wrap{position:relative;width:100%;height:110px}
.mood-chart-svg{width:100%;height:100%;overflow:visible}

/* Hour heatmap */
.hour-hm{display:grid;grid-template-columns:repeat(12,1fr);gap:3px}
.hcell{aspect-ratio:1;border-radius:3px;background:var(--bg-3);display:flex;align-items:center;justify-content:center;font-size:.38rem;color:var(--t3)}
.hcell[data-l="1"]{background:rgba(232,168,50,.22)}
.hcell[data-l="2"]{background:rgba(232,168,50,.5)}
.hcell[data-l="3"]{background:rgba(224,84,84,.7)}
.hlabel-row{display:grid;grid-template-columns:repeat(12,1fr);gap:3px;margin-top:4px}
.hlabel{font-size:.46rem;color:var(--t3);text-align:center}

/* Analysis */
.analysis-card{margin:0 16px 14px;background:linear-gradient(135deg,var(--bg-2),rgba(30,48,44,.92));border-radius:var(--r3);padding:18px;border:1px solid rgba(78,203,138,.15)}
.analysis-txt{font-size:.86rem;color:var(--t1);line-height:1.82;white-space:pre-wrap}
.analysis-loading{color:var(--t3);font-style:italic;font-size:.86rem}

/* Toolbox */
.tb-section{padding:0 16px;margin-bottom:22px}
.tool-grid{display:grid;grid-template-columns:1fr 1fr;gap:9px}
.tool-card{background:var(--bg-2);border-radius:var(--r3);padding:18px 14px;border:1px solid var(--bdr);display:flex;flex-direction:column;gap:8px;transition:all var(--t)}
.tool-card:active{transform:scale(.97);background:var(--bg-3)}
.tc-icon{font-size:1.55rem}
.tc-name{font-size:.87rem;font-weight:600;color:var(--t1);line-height:1.2}
.tc-desc{font-size:.7rem;color:var(--t2);line-height:1.4}
.tech-card{background:var(--bg-2);border-radius:var(--r3);border:1px solid var(--bdr);overflow:hidden;margin-bottom:9px}
.tech-hdr{padding:15px 18px;display:flex;align-items:center;justify-content:space-between;gap:12px}
.tech-hdr-left{display:flex;align-items:center;gap:10px}
.tech-icon{font-size:1.15rem}
.tech-title{font-size:.87rem;font-weight:600;color:var(--t1)}
.tech-arrow{color:var(--t3);font-size:.8rem;transition:transform var(--t)}
.tech-card.open .tech-arrow{transform:rotate(180deg)}
.tech-body{display:none;padding:0 18px 16px}
.tech-card.open .tech-body{display:block}
.tech-step{display:flex;gap:10px;margin-bottom:9px;font-size:.82rem;color:var(--t2);line-height:1.55}
.step-n{width:20px;height:20px;border-radius:50%;background:var(--gold-d);color:var(--gold-t);font-size:.6rem;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:2px}
.contacts-list{display:flex;flex-direction:column;gap:8px}
.contact-card{background:var(--bg-2);border-radius:var(--r2);border:1px solid var(--bdr);padding:14px;display:flex;align-items:center;gap:12px}
.contact-avatar{width:38px;height:38px;border-radius:50%;background:var(--gold-d);display:flex;align-items:center;justify-content:center;font-size:1.1rem;flex-shrink:0}
.contact-name{font-size:.88rem;font-weight:500;color:var(--t1)}
.contact-phone{font-size:.75rem;color:var(--t3);direction:ltr}
.contact-call{margin-right:auto;color:var(--green);font-size:1.2rem}

/* Chat */
.chat-msgs{padding:16px;display:flex;flex-direction:column;gap:11px;padding-bottom:86px}
.chat-bubble{max-width:84%;padding:12px 15px;font-size:.86rem;line-height:1.65;animation:bbl .3s cubic-bezier(.34,1.56,.64,1)}
@keyframes bbl{from{opacity:0;transform:scale(.91) translateY(8px)}to{opacity:1;transform:scale(1) translateY(0)}}
.chat-bubble.ai{background:var(--bg-2);border:1px solid var(--bdr);border-radius:17px 17px 4px 17px;align-self:flex-end;color:var(--t1)}
.chat-bubble.user{background:var(--gold-d);border:1px solid rgba(232,168,50,.25);border-radius:17px 17px 17px 4px;align-self:flex-start;color:var(--t1)}
.chat-bubble.typing{display:flex;gap:5px;padding:15px 18px;align-self:flex-end}
.tdot{width:7px;height:7px;border-radius:50%;background:var(--t3);animation:tdot 1.2s infinite}
.tdot:nth-child(2){animation-delay:.2s}
.tdot:nth-child(3){animation-delay:.4s}
@keyframes tdot{0%,60%,100%{transform:translateY(0);opacity:.4}30%{transform:translateY(-5px);opacity:1}}
.chat-input-bar{position:fixed;bottom:calc(var(--nav-h) + env(safe-area-inset-bottom));left:0;right:0;padding:9px 14px;background:var(--bg-glass);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-top:1px solid var(--bdr);display:flex;gap:9px;align-items:flex-end;z-index:100}
.chat-input{flex:1;background:var(--bg-3);border:1.5px solid var(--bdr);border-radius:19px;color:var(--t1);padding:10px 15px;font-size:.87rem;outline:none;resize:none;max-height:110px;overflow-y:auto;line-height:1.5;transition:border-color var(--t)}
.chat-input:focus{border-color:var(--gold)}
.chat-send{width:40px;height:40px;border-radius:50%;background:var(--gold);color:#09100f;font-size:1rem;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all var(--t)}
.chat-send:disabled{background:var(--bg-3);color:var(--t3)}
.chat-send:active:not(:disabled){transform:scale(.91)}
.chat-day{font-size:.63rem;color:var(--t3);text-align:center;padding:4px 0}

/* Profile */
.prof-hdr{padding:26px 20px 14px;text-align:center}
.prof-avatar{width:70px;height:70px;border-radius:50%;background:var(--gold-d);border:2px solid var(--gold);display:flex;align-items:center;justify-content:center;font-size:1.9rem;margin:0 auto 10px}
.prof-dname{font-family:var(--fd);font-size:1.4rem;margin-bottom:3px}
.prof-since{font-size:.73rem;color:var(--t3)}
.prof-section{padding:0 16px;margin-bottom:22px}
.srow{background:var(--bg-2);border:1px solid var(--bdr);border-radius:var(--r2);padding:13px 15px;display:flex;align-items:center;gap:11px;margin-bottom:7px;transition:all var(--t)}
.srow:active{background:var(--bg-3)}
.srow-icon{font-size:.95rem;width:20px;text-align:center}
.srow-content{flex:1}
.srow-label{font-size:.86rem;font-weight:500;color:var(--t1)}
.srow-val{font-size:.7rem;color:var(--t3);margin-top:1px;max-width:170px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.srow-arrow{color:var(--t3);font-size:.78rem}

/* Onboarding */
.ob-screen{min-height:100dvh;display:flex;flex-direction:column;padding:52px 24px 40px;background:var(--bg-0)}
.ob-step{display:none;flex:1;flex-direction:column;animation:fsin .38s ease}
.ob-step.active{display:flex}
.ob-icon{font-size:3.5rem;margin-bottom:22px}
.ob-title{font-family:var(--fd);font-size:1.9rem;color:var(--t1);margin-bottom:10px;line-height:1.2}
.ob-title em{font-style:normal;color:var(--gold-t)}
.ob-desc{font-size:.92rem;color:var(--t2);line-height:1.82;margin-bottom:26px}
.ob-form{flex:1;display:flex;flex-direction:column;gap:14px;overflow-y:auto}
.ob-footer{margin-top:auto;padding-top:18px}
.ob-progress{display:flex;gap:6px;justify-content:center;margin-bottom:18px}
.pdot{width:6px;height:6px;border-radius:50%;background:var(--bg-3);transition:all var(--t)}
.pdot.active{background:var(--gold);width:18px;border-radius:3px}

/* Tags Input widget */
.tags-widget{}
.tags-display{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:7px}
.tw-tag{display:flex;align-items:center;gap:5px;padding:4px 10px;background:var(--bg-3);border:1px solid var(--bdr);border-radius:var(--rf);font-size:.77rem;color:var(--t1)}
.tw-rem{color:var(--t3);font-size:.9rem;line-height:1}
.tw-input-row{display:flex;gap:7px}

/* Empty state */
.empty-state{text-align:center;padding:56px 28px}
.es-icon{font-size:2.8rem;margin-bottom:14px}
.es-title{font-family:var(--fd);font-size:1.15rem;color:var(--t1);margin-bottom:7px}
.es-desc{font-size:.84rem;color:var(--t2);line-height:1.65;margin-bottom:22px}

/* Toast */
.toast{position:fixed;top:20px;left:50%;transform:translateX(-50%) translateY(-80px);background:var(--bg-3);border:1px solid var(--bdr);border-radius:var(--rf);padding:9px 18px;font-size:.82rem;color:var(--t1);z-index:900;transition:transform var(--sp);white-space:nowrap}
.toast.show{transform:translateX(-50%) translateY(0)}
.toast.ok{border-color:rgba(78,203,138,.4);color:var(--green)}
.toast.err{border-color:rgba(224,84,84,.4);color:var(--red)}

/* Confirm dialog */
.confirm-dlg{position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:700;display:flex;align-items:center;justify-content:center;padding:24px;opacity:0;visibility:hidden;transition:all var(--t)}
.confirm-dlg.open{opacity:1;visibility:visible}
.confirm-box{background:var(--bg-2);border:1px solid var(--bdr);border-radius:var(--r4);padding:28px 24px;width:100%;max-width:320px;text-align:center}
.confirm-title{font-size:1.1rem;font-weight:600;margin-bottom:8px}
.confirm-desc{font-size:.87rem;color:var(--t2);line-height:1.6;margin-bottom:22px}
.confirm-actions{display:flex;gap:10px}

/* Helpers */
.hidden{display:none!important}
.mt8{margin-top:8px}.mt16{margin-top:16px}.mt24{margin-top:24px}
.divider{height:1px;background:var(--bdr);margin:14px 0}
.spacer{height:24px}
*::-webkit-scrollbar{display:none}
